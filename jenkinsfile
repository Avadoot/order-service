node {
    checkout scm

    stage('Build & Test') {
        sh 'mvn clean install'
    }

    stage('build and release artifact') {
        sh 'mvn -Dresume=false -DdryRun=true release:prepare -Darguments="-DskipTests"'
        sh 'mvn -Dresume=false release:prepare release:perform -Darguments="-DskipTests"'
    }

    stage('Publish Pact to pact broker') {
        echo 'test'
    }

    stage('Deploy') {
        echo 'deploy'
    }
}